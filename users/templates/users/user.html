{% extends 'poll/base.html' %}

{% block title %}
    <title> Profile </title>
{% endblock %}



{% block body %}

    <div class="text-white p-2 bg-gray-950 w-full">


    <h2> Welcome, {% if user_profile.display_name %} {{user_profile.display_name}} {% else %} {{ user_profile.user.username }} {% endif %} </h2>
    <p> @{{ user_profile.user.username.lower }} </p>
    <p>---- {{ user_profile.user.email }} </p>
    

    <hr>

    <div id="connections_count" class="w-full flex space-x-5">
        <div class="">
            
        </div>
        <p>  {{ followers|length }} <a href="{% url 'poll:connections' %}"> Follower(s) </a>   </p> 

        <p>  {{ followings|length }} <a href="{%url 'poll:connections' %}"> Following(s) </a>  </p> 
    </div>
    

    <hr>
    
    <h3>
        <i> My Polls... ({{ questions|length }})</i>
    </h3>
    
    <h3>
        <a href="{% url 'poll:activities' %}"> Activities </a>
    </h3>

    
    <hr>
    <ol>
    {% for question in questions %}
    
        <li> {{ question.question_text }} </li>
        <a href="{% url 'poll:poll_details' question.id %}"> View Poll </a>

    {% empty %}
        <i> You haven't created any polls </i>
    {% endfor %}
    </ol>

    {% if request.user != user %}
        {% if authup not in user_profile.followers.all %}
            <form action="{% url 'users:connect' user.id  %}" method="post">
                {% csrf_token %}
                <input type="submit" name="connect" value="Follow">
            </form>
        {% elif authup in user_profile.followers.all %}
            <form action="{% url 'users:connect' user.id  %}" method="post">
                {% csrf_token %}
                <input type="submit" name="connect" value="Unfollow">
            </form>
        {% endif %}
    {% endif %}
        
    <br>

    {% if request.user == user %}

        <a href="{% url 'users:logout' %}"> Logout </a>

    {% endif %}

    </div>
    
{% endblock %}
